<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manna Cakes - Seu Bolo Personalizado</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter (para um estilo moderno e arredondado) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDF5E6; /* Bege claro */
            color: #4A4A4A; /* Cinza escuro para o texto */
        }
        /* Cores pastel personalizadas para Tailwind */
        .bg-pink-50 { background-color: #FCE4EC; } /* Rosa muito claro */
        .bg-pink-100 { background-color: #F8BBD0; } /* Rosa claro */
        .bg-pink-400 { background-color: #EC407A; } /* Rosa médio */
        .hover\:bg-pink-500:hover { background-color: #D81B60; } /* Rosa mais escuro no hover */
        .text-pink-700 { color: #C2185B; } /* Rosa escuro para títulos */
        .border-pink-300 { border-color: #F06292; } /* Borda rosa */
        .focus\:ring-pink-400:focus { --tw-ring-color: #EC407A; } /* Anel de foco rosa */

        .bg-beige-50 { background-color: #FDF5E6; } /* Bege muito claro */
        .bg-beige-100 { background-color: #F5DEB3; } /* Bege claro */
        .text-beige-800 { color: #8B4513; } /* Marrom para títulos */

        /* Estilo para o botão flutuante do WhatsApp */
        .whatsapp-float {
            position: fixed;
            width: 60px;
            height: 60px;
            bottom: 40px;
            right: 40px;
            background-color: #25D366;
            color: #FFF;
            border-radius: 50px;
            text-align: center;
            font-size: 30px;
            box-shadow: 2px 2px 3px #999;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }
        .whatsapp-float:hover {
            transform: scale(1.1);
        }
        /* Ícone do WhatsApp (Font Awesome) */
        @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css');

        /* Estilo para esconder/mostrar páginas */
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Botão flutuante do WhatsApp -->
    <a href="https://wa.me/5511947640461" target="_blank" class="whatsapp-float">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Página Inicial -->
    <div id="home-page" class="page active flex flex-col items-center justify-center min-h-screen bg-pink-50 text-gray-800 p-4 md:p-8">
        <div class="max-w-4xl text-center">
            <h1 class="text-5xl md:text-6xl font-bold text-pink-700 mb-6 rounded-lg p-4 shadow-md bg-white">Manna Cakes</h1>
            <p class="text-lg md:text-xl mb-8 leading-relaxed">
                Na Manna Cakes, cada bolo é uma obra de arte feita com carinho e os melhores ingredientes. Transformamos seus momentos especiais em memórias doces e inesquecíveis. Descubra a perfeição em cada fatia!
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                <div class="bg-white rounded-lg shadow-lg overflow-hidden transform transition-transform hover:scale-105">
                    <img src="https://placehold.co/400x300/F8BBD0/FFFFFF?text=Bolo+de+Aniversário" alt="Bolo de Aniversário" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-pink-700">Bolos de Aniversário</h3>
                        <p class="text-sm text-gray-600">Celebre com um bolo único e delicioso.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-lg overflow-hidden transform transition-transform hover:scale-105">
                    <img src="https://placehold.co/400x300/F5DEB3/FFFFFF?text=Docinhos+Variados" alt="Docinhos Variados" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-pink-700">Docinhos Artesanais</h3>
                        <p class="text-sm text-gray-600">Pequenas delícias para adoçar seu dia.</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-lg overflow-hidden transform transition-transform hover:scale-105">
                    <img src="https://placehold.co/400x300/FCE4EC/FFFFFF?text=Bolos+Decorados" alt="Bolos Decorados" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="font-semibold text-lg text-pink-700">Bolos para Eventos</h3>
                        <p class="text-sm text-gray-600">Personalizamos para qualquer ocasião especial.</p>
                    </div>
                </div>
            </div>

            <button id="start-order-btn" class="bg-pink-400 hover:bg-pink-500 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-pink-400 focus:ring-opacity-75">
                Fazer meu pedido agora
            </button>
        </div>
    </div>

    <!-- Página de Pedido Personalizado -->
    <div id="order-page" class="page min-h-screen bg-beige-50 text-gray-800 p-4 md:p-8 flex items-center justify-center">
        <div class="max-w-4xl w-full bg-white rounded-lg shadow-xl p-6 md:p-8">
            <h2 class="text-4xl font-bold text-beige-800 mb-8 text-center">Monte Seu Bolo Personalizado</h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Seção de Escolha do Bolo -->
                <div>
                    <h3 class="text-2xl font-semibold text-pink-700 mb-4">1. Escolha o Bolo</h3>

                    <!-- Formato do Bolo -->
                    <div class="mb-6 p-4 border border-pink-300 rounded-lg shadow-sm">
                        <label class="block text-lg font-medium text-gray-700 mb-3">Formato do Bolo:</label>
                        <div class="flex flex-wrap gap-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="cake-format" value="redondo" class="form-radio text-pink-400 h-5 w-5" checked>
                                <span class="ml-2 text-gray-700">Redondo</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="cake-format" value="retangular" class="form-radio text-pink-400 h-5 w-5">
                                <span class="ml-2 text-gray-700">Retangular</span>
                            </label>
                        </div>
                    </div>

                    <!-- Tamanho e Preço do Bolo -->
                    <div class="mb-6 p-4 border border-pink-300 rounded-lg shadow-sm">
                        <label class="block text-lg font-medium text-gray-700 mb-3">Tamanho e Tipo:</label>
                        <div id="cake-sizes-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Opções de tamanho serão carregadas aqui via JS -->
                        </div>
                    </div>

                    <!-- Sabor do Bolo -->
                    <div class="mb-6 p-4 border border-pink-300 rounded-lg shadow-sm">
                        <label class="block text-lg font-medium text-gray-700 mb-3">Sabor do Bolo:</label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="cake-flavor-1" class="block text-sm font-medium text-gray-600 mb-1">Sabor 1:</label>
                                <select id="cake-flavor-1" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-pink-400 focus:border-pink-400 sm:text-sm rounded-md shadow-sm">
                                    <option value="">Selecione um sabor</option>
                                    <optgroup label="Comuns">
                                        <!-- Sabores comuns serão carregados aqui via JS -->
                                    </optgroup>
                                    <optgroup label="Especiais">
                                        <!-- Sabores especiais serão carregados aqui via JS -->
                                    </optgroup>
                                </select>
                            </div>
                            <div id="cake-flavor-2-container" class="hidden">
                                <label for="cake-flavor-2" class="block text-sm font-medium text-gray-600 mb-1">Sabor 2 (para "2 Amores"):</label>
                                <select id="cake-flavor-2" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-pink-400 focus:border-pink-400 sm:text-sm rounded-md shadow-sm">
                                    <option value="">Selecione um sabor</option>
                                    <optgroup label="Comuns">
                                        <!-- Sabores comuns serão carregados aqui via JS -->
                                    </optgroup>
                                    <optgroup label="Especiais">
                                        <!-- Sabores especiais serão carregados aqui via JS -->
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        <p class="text-sm text-gray-500 mt-2">Selecione "2 Amores" para escolher dois sabores.</p>
                    </div>
                </div>

                <!-- Seção de Docinhos e Informações do Cliente -->
                <div>
                    <h3 class="text-2xl font-semibold text-pink-700 mb-4">2. Adicione Opcionais e Dados</h3>

                    <!-- Adicionar Docinhos -->
                    <div class="mb-6 p-4 border border-pink-300 rounded-lg shadow-sm">
                        <label class="inline-flex items-center mb-3">
                            <input type="checkbox" id="add-docinhos" class="form-checkbox text-pink-400 h-5 w-5">
                            <span class="ml-2 text-lg font-medium text-gray-700">Adicionar Docinhos (Opcional)</span>
                        </label>

                        <div id="docinhos-options-container" class="hidden mt-4">
                            <label class="block text-base font-medium text-gray-700 mb-2">Quantidade:</label>
                            <div class="flex flex-wrap gap-4 mb-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="docinho-quantity" value="50_unidades" class="form-radio text-pink-400 h-5 w-5" disabled>
                                    <span class="ml-2 text-gray-700">50 Unidades</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="docinho-quantity" value="100_unidades" class="form-radio text-pink-400 h-5 w-5" disabled>
                                    <span class="ml-2 text-gray-700">100 Unidades</span>
                                </label>
                            </div>

                            <label class="block text-base font-medium text-gray-700 mb-2">Tipo:</label>
                            <div class="flex flex-wrap gap-4 mb-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="docinho-type" value="comuns" class="form-radio text-pink-400 h-5 w-5" disabled>
                                    <span class="ml-2 text-gray-700">Comuns</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="docinho-type" value="especiais" class="form-radio text-pink-400 h-5 w-5" disabled>
                                    <span class="ml-2 text-gray-700">Especiais</span>
                                </label>
                            </div>

                            <div id="docinho-flavors-container">
                                <label for="docinho-flavor-1" class="block text-sm font-medium text-gray-600 mb-1">Sabor 1:</label>
                                <select id="docinho-flavor-1" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-pink-400 focus:border-pink-400 sm:text-sm rounded-md shadow-sm" disabled>
                                    <option value="">Selecione um sabor</option>
                                    <optgroup label="Comuns">
                                        <!-- Sabores comuns docinhos serão carregados aqui via JS -->
                                    </optgroup>
                                    <optgroup label="Especiais">
                                        <!-- Sabores especiais docinhos serão carregados aqui via JS -->
                                    </optgroup>
                                </select>
                                <div id="docinho-flavor-2-container" class="hidden mt-4">
                                    <label for="docinho-flavor-2" class="block text-sm font-medium text-gray-600 mb-1">Sabor 2:</label>
                                    <select id="docinho-flavor-2" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-pink-400 focus:border-pink-400 sm:text-sm rounded-md shadow-sm" disabled>
                                        <option value="">Selecione um sabor</option>
                                        <optgroup label="Comuns">
                                            <!-- Sabores comuns docinhos serão carregados aqui via JS -->
                                        </optgroup>
                                        <optgroup label="Especiais">
                                            <!-- Sabores especiais docinhos serão carregados aqui via JS -->
                                        </optgroup>
                                    </select>
                                </div>
                                <p id="docinho-flavor-hint" class="text-sm text-gray-500 mt-2"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Informações do Cliente -->
                    <div class="mb-6 p-4 border border-pink-300 rounded-lg shadow-sm">
                        <h3 class="text-lg font-medium text-gray-700 mb-3">Seus Dados:</h3>
                        <div class="mb-4">
                            <label for="customer-name" class="block text-sm font-medium text-gray-600 mb-1">Nome Completo:</label>
                            <input type="text" id="customer-name" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-pink-400 focus:border-pink-400" required>
                        </div>
                        <div class="mb-4">
                            <label for="customer-phone" class="block text-sm font-medium text-gray-600 mb-1">Telefone (WhatsApp):</label>
                            <input type="tel" id="customer-phone" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-pink-400 focus:border-pink-400" placeholder="(DD) 9XXXX-XXXX" required>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label for="delivery-date" class="block text-sm font-medium text-gray-600 mb-1">Data de Entrega/Retirada:</label>
                                <input type="date" id="delivery-date" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-pink-400 focus:border-pink-400" required>
                            </div>
                            <div>
                                <label for="delivery-time" class="block text-sm font-medium text-gray-600 mb-1">Hora de Entrega/Retirada:</label>
                                <input type="time" id="delivery-time" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-pink-400 focus:border-pink-400" required>
                            </div>
                        </div>
                        <div>
                            <label for="observations" class="block text-sm font-medium text-gray-600 mb-1">Observações Adicionais:</label>
                            <textarea id="observations" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-pink-400 focus:border-pink-400"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resumo do Pedido e Pagamento -->
            <div class="mt-8 p-6 bg-pink-50 rounded-lg shadow-md">
                <h3 class="text-2xl font-semibold text-pink-700 mb-4">Resumo do Pedido</h3>
                <div id="order-summary" class="text-gray-700 leading-relaxed mb-6">
                    <p><strong>Bolo:</strong> <span id="summary-cake-details">Nenhum bolo selecionado</span></p>
                    <p><strong>Docinhos:</strong> <span id="summary-docinhos-details">Nenhum docinho selecionado</span></p>
                    <p class="mt-4 text-xl font-bold">Total: <span id="summary-total-price">R$ 0,00</span></p>
                </div>

                <h3 class="text-xl font-semibold text-pink-700 mb-3">Formas de Pagamento:</h3>
                <ul class="list-disc list-inside text-gray-700 mb-6">
                    <li>Cartão de crédito (em até 4x sem juros)</li>
                    <li>Débito</li>
                    <li>Pix</li>
                </ul>

                <button id="finalize-order-btn" class="w-full bg-pink-400 hover:bg-pink-500 text-white font-bold py-4 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-pink-400 focus:ring-opacity-75">
                    Finalizar Pedido e Enviar via WhatsApp
                </button>
            </div>
        </div>
    </div>

    <script>
        // Dados do site
        const cakeFormats = {
            redondo: {
                label: "Redondo",
                sizes: {
                    pp: { label: "PP (4 a 8 pessoas)", comum: 70.00, especial: 85.00 },
                    p: { label: "P (10 a 15 pessoas)", comum: 110.00, especial: 130.00 },
                    m: { label: "M (20 a 22 pessoas)", comum: 165.00, especial: 180.00 },
                    g: { label: "G (32 a 38 pessoas)", comum: 195.00, especial: 215.00 }
                }
            },
            retangular: {
                label: "Retangular",
                sizes: {
                    p: { label: "P (15 a 20 pessoas)", comum: 170.00, especial: 190.00 },
                    m: { label: "M (30 a 35 pessoas)", comum: 210.00, especial: 235.00 },
                    g: { label: "G (40 a 45 pessoas)", comum: 280.00, especial: 310.00 }
                }
            }
        };

        const cakeFlavors = {
            comuns: [
                "Ninho", "Brigadeiro", "Prestígio"
            ],
            especiais: [
                "Ninho com morango", "Doce de leite", "Brigadeiro com morango",
                "Ninho com abacaxi", "Doce de leite com abacaxi", "Doce de leite com ameixa",
                "Brigadeiro de maracujá", "Mousse de maracujá", "Doce de leite com morango",
                "2 Amores", "4 leites", "4 leites com morango", "Brigadeiro trufado"
            ]
        };

        const docinhoOptions = {
            "50_unidades": {
                label: "50 unidades",
                comuns: 55.00,
                especiais: 65.00,
                maxFlavors: 1
            },
            "100_unidades": {
                label: "100 unidades",
                comuns: 100.00,
                especiais: 110.00,
                maxFlavors: 2
            }
        };

        const docinhoFlavors = {
            comuns: [
                "Brigadeiro", "Beijinho", "Ninho", "Bicho de pé"
            ],
            especiais: [
                "Ninho com Nutella", "Ferrero", "Surpresa de uva", "Churros"
            ]
        };

        const whatsappNumber = "5511947640461"; // Número de WhatsApp para contato

        // Estado atual do pedido
        let currentOrder = {
            cake: {
                format: null,
                size: null,
                type: null, // 'comum' or 'especial'
                flavor1: null,
                flavor2: null, // for '2 Amores'
                price: 0
            },
            docinhos: {
                quantity: null,
                type: null, // 'comuns' or 'especiais'
                flavors: [],
                price: 0
            },
            customer: {
                name: "",
                phone: "",
                deliveryDate: "",
                deliveryTime: "",
                observations: ""
            },
            totalPrice: 0
        };

        // Elementos DOM
        const homePage = document.getElementById('home-page');
        const orderPage = document.getElementById('order-page');
        const startOrderBtn = document.getElementById('start-order-btn');
        const cakeFormatRadios = document.querySelectorAll('input[name="cake-format"]');
        const cakeSizesOptionsDiv = document.getElementById('cake-sizes-options');
        const cakeFlavor1Select = document.getElementById('cake-flavor-1');
        const cakeFlavor2Container = document.getElementById('cake-flavor-2-container');
        const cakeFlavor2Select = document.getElementById('cake-flavor-2');
        const addDocinhosCheckbox = document.getElementById('add-docinhos');
        const docinhosOptionsContainer = document.getElementById('docinhos-options-container');
        const docinhoQuantityRadios = document.querySelectorAll('input[name="docinho-quantity"]');
        const docinhoTypeRadios = document.querySelectorAll('input[name="docinho-type"]');
        const docinhoFlavor1Select = document.getElementById('docinho-flavor-1');
        const docinhoFlavor2Container = document.getElementById('docinho-flavor-2-container');
        const docinhoFlavor2Select = document.getElementById('docinho-flavor-2');
        const docinhoFlavorHint = document.getElementById('docinho-flavor-hint');
        const customerNameInput = document.getElementById('customer-name');
        const customerPhoneInput = document.getElementById('customer-phone');
        const deliveryDateInput = document.getElementById('delivery-date');
        const deliveryTimeInput = document.getElementById('delivery-time');
        const observationsTextarea = document.getElementById('observations');
        const summaryCakeDetails = document.getElementById('summary-cake-details');
        const summaryDocinhosDetails = document.getElementById('summary-docinhos-details');
        const summaryTotalPrice = document.getElementById('summary-total-price');
        const finalizeOrderBtn = document.getElementById('finalize-order-btn');

        // Funções de inicialização e atualização
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
                page.classList.add('hidden');
            });
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
                targetPage.classList.remove('hidden');
            }
        }

        function populateCakeFlavors() {
            // Limpa as opções existentes
            cakeFlavor1Select.innerHTML = '<option value="">Selecione um sabor</option>';
            cakeFlavor2Select.innerHTML = '<option value="">Selecione um sabor</option>';

            const commonOptgroup1 = document.createElement('optgroup');
            commonOptgroup1.label = "Comuns";
            cakeFlavors.comuns.forEach(flavor => {
                const option = document.createElement('option');
                option.value = flavor;
                option.textContent = flavor;
                commonOptgroup1.appendChild(option);
            });
            cakeFlavor1Select.appendChild(commonOptgroup1);

            const specialOptgroup1 = document.createElement('optgroup');
            specialOptgroup1.label = "Especiais";
            cakeFlavors.especiais.forEach(flavor => {
                const option = document.createElement('option');
                option.value = flavor;
                option.textContent = flavor;
                specialOptgroup1.appendChild(option);
            });
            cakeFlavor1Select.appendChild(specialOptgroup1);

            // Popula o segundo seletor de sabor para "2 Amores"
            cakeFlavor2Select.appendChild(commonOptgroup1.cloneNode(true));
            cakeFlavor2Select.appendChild(specialOptgroup1.cloneNode(true));
        }

        function populateDocinhoFlavors() {
            // Limpa as opções existentes
            docinhoFlavor1Select.innerHTML = '<option value="">Selecione um sabor</option>';
            docinhoFlavor2Select.innerHTML = '<option value="">Selecione um sabor</option>';

            const commonOptgroupDocinho1 = document.createElement('optgroup');
            commonOptgroupDocinho1.label = "Comuns";
            docinhoFlavors.comuns.forEach(flavor => {
                const option = document.createElement('option');
                option.value = flavor;
                option.textContent = flavor;
                commonOptgroupDocinho1.appendChild(option);
            });
            docinhoFlavor1Select.appendChild(commonOptgroupDocinho1);

            const specialOptgroupDocinho1 = document.createElement('optgroup');
            specialOptgroupDocinho1.label = "Especiais";
            docinhoFlavors.especiais.forEach(flavor => {
                const option = document.createElement('option');
                option.value = flavor;
                option.textContent = flavor;
                specialOptgroupDocinho1.appendChild(option);
            });
            docinhoFlavor1Select.appendChild(specialOptgroupDocinho1);

            // Popula o segundo seletor de sabor para docinhos
            docinhoFlavor2Select.appendChild(commonOptgroupDocinho1.cloneNode(true));
            docinhoFlavor2Select.appendChild(specialOptgroupDocinho1.cloneNode(true));
        }

        function updateCakeSizesOptions() {
            cakeSizesOptionsDiv.innerHTML = ''; // Limpa as opções existentes
            const selectedFormat = document.querySelector('input[name="cake-format"]:checked').value;
            currentOrder.cake.format = selectedFormat;

            const sizes = cakeFormats[selectedFormat].sizes;
            for (const sizeKey in sizes) {
                const size = sizes[sizeKey];
                const sizeDiv = document.createElement('div');
                sizeDiv.className = 'p-3 border border-gray-200 rounded-md shadow-sm';
                sizeDiv.innerHTML = `
                    <p class="font-medium text-gray-800 mb-2">${size.label}</p>
                    <label class="inline-flex items-center mr-4">
                        <input type="radio" name="cake-size-type" value="${sizeKey}_comum" data-size-key="${sizeKey}" data-type="comum" class="form-radio text-pink-400 h-4 w-4">
                        <span class="ml-2 text-gray-700">Comum: R$ ${size.comum.toFixed(2).replace('.', ',')}</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="cake-size-type" value="${sizeKey}_especial" data-size-key="${sizeKey}" data-type="especial" class="form-radio text-pink-400 h-4 w-4">
                        <span class="ml-2 text-gray-700">Especial: R$ ${size.especial.toFixed(2).replace('.', ',')}</span>
                    </label>
                `;
                cakeSizesOptionsDiv.appendChild(sizeDiv);
            }

            // Adiciona event listeners para os novos radios de tamanho
            document.querySelectorAll('input[name="cake-size-type"]').forEach(radio => {
                radio.addEventListener('change', updateCakeSelection);
            });

            // Reseta a seleção de tamanho e tipo ao mudar o formato
            currentOrder.cake.size = null;
            currentOrder.cake.type = null;
            currentOrder.cake.price = 0;
            updateOrderSummary();
        }

        function updateCakeSelection() {
            const selectedSizeRadio = document.querySelector('input[name="cake-size-type"]:checked');
            if (selectedSizeRadio) {
                const sizeKey = selectedSizeRadio.dataset.sizeKey;
                const type = selectedSizeRadio.dataset.type;
                const format = currentOrder.cake.format;

                if (format && sizeKey && type) {
                    currentOrder.cake.size = sizeKey;
                    currentOrder.cake.type = type;
                    currentOrder.cake.price = cakeFormats[format].sizes[sizeKey][type];
                }
            } else {
                currentOrder.cake.size = null;
                currentOrder.cake.type = null;
                currentOrder.cake.price = 0;
            }
            updateOrderSummary();
        }

        function updateCakeFlavorSelection() {
            currentOrder.cake.flavor1 = cakeFlavor1Select.value || null;
            currentOrder.cake.flavor2 = null; // Reseta o segundo sabor

            if (cakeFlavor1Select.value === "2 Amores") {
                cakeFlavor2Container.classList.remove('hidden');
                cakeFlavor2Select.setAttribute('required', 'true');
            } else {
                cakeFlavor2Container.classList.add('hidden');
                cakeFlavor2Select.removeAttribute('required');
                cakeFlavor2Select.value = "";
            }

            currentOrder.cake.flavor2 = cakeFlavor2Select.value || null;
            updateOrderSummary();
        }

        function updateDocinhoFlavorSelection() {
            const maxFlavors = docinhoOptions[currentOrder.docinhos.quantity]?.maxFlavors || 0;
            currentOrder.docinhos.flavors = [];

            if (docinhoFlavor1Select.value) {
                currentOrder.docinhos.flavors.push(docinhoFlavor1Select.value);
            }

            if (maxFlavors > 1) {
                docinhoFlavor2Container.classList.remove('hidden');
                docinhoFlavor2Select.disabled = false;
                if (docinhoFlavor2Select.value) {
                    currentOrder.docinhos.flavors.push(docinhoFlavor2Select.value);
                }
            } else {
                docinhoFlavor2Container.classList.add('hidden');
                docinhoFlavor2Select.disabled = true;
                docinhoFlavor2Select.value = ""; // Limpa a seleção se não for permitido
            }

            docinhoFlavorHint.textContent = maxFlavors > 0 ? `Pode escolher até ${maxFlavors} sabor(es).` : '';

            updateOrderSummary();
        }

        function toggleDocinhos() {
            const isChecked = addDocinhosCheckbox.checked;
            if (isChecked) {
                docinhosOptionsContainer.classList.remove('hidden');
                docinhoQuantityRadios.forEach(radio => radio.disabled = false);
                docinhoTypeRadios.forEach(radio => radio.disabled = false);
                docinhoFlavor1Select.disabled = false;
                // Ativa o primeiro radio de quantidade por padrão se nenhum estiver selecionado
                if (!document.querySelector('input[name="docinho-quantity"]:checked')) {
                    docinhoQuantityRadios[0].checked = true;
                    updateDocinhoSelection();
                } else {
                    updateDocinhoSelection(); // Atualiza se já houver seleção
                }
            } else {
                docinhosOptionsContainer.classList.add('hidden');
                docinhoQuantityRadios.forEach(radio => {
                    radio.checked = false;
                    radio.disabled = true;
                });
                docinhoTypeRadios.forEach(radio => {
                    radio.checked = false;
                    radio.disabled = true;
                });
                docinhoFlavor1Select.value = "";
                docinhoFlavor1Select.disabled = true;
                docinhoFlavor2Select.value = "";
                docinhoFlavor2Select.disabled = true;
                docinhoFlavor2Container.classList.add('hidden');
                docinhoFlavorHint.textContent = '';

                currentOrder.docinhos.quantity = null;
                currentOrder.docinhos.type = null;
                currentOrder.docinhos.flavors = [];
                currentOrder.docinhos.price = 0;
            }
            updateOrderSummary();
        }

        function updateDocinhoSelection() {
            const selectedQuantityRadio = document.querySelector('input[name="docinho-quantity"]:checked');
            const selectedTypeRadio = document.querySelector('input[name="docinho-type"]:checked');

            currentOrder.docinhos.quantity = selectedQuantityRadio ? selectedQuantityRadio.value : null;
            currentOrder.docinhos.type = selectedTypeRadio ? selectedTypeRadio.value : null;

            if (currentOrder.docinhos.quantity && currentOrder.docinhos.type) {
                const quantityOptions = docinhoOptions[currentOrder.docinhos.quantity];
                currentOrder.docinhos.price = quantityOptions[currentOrder.docinhos.type];
            } else {
                currentOrder.docinhos.price = 0;
            }
            updateDocinhoFlavorSelection(); // Atualiza a seleção de sabores de docinhos
            updateOrderSummary();
        }

        function updateCustomerInfo() {
            currentOrder.customer.name = customerNameInput.value;
            currentOrder.customer.phone = customerPhoneInput.value;
            currentOrder.customer.deliveryDate = deliveryDateInput.value;
            currentOrder.customer.deliveryTime = deliveryTimeInput.value;
            currentOrder.customer.observations = observationsTextarea.value;
        }

        function updateOrderSummary() {
            let total = 0;
            let cakeSummary = "Nenhum bolo selecionado";
            let docinhosSummary = "Nenhum docinho selecionado";

            // Resumo do Bolo
            if (currentOrder.cake.format && currentOrder.cake.size && currentOrder.cake.type) {
                const formatLabel = cakeFormats[currentOrder.cake.format].label;
                const sizeLabel = cakeFormats[currentOrder.cake.format].sizes[currentOrder.cake.size].label;
                const typeLabel = currentOrder.cake.type === 'comum' ? 'Comum' : 'Especial';
                total += currentOrder.cake.price;
                cakeSummary = `${formatLabel}, ${sizeLabel}, Tipo: ${typeLabel}`;
                if (currentOrder.cake.flavor1) {
                    cakeSummary += `, Sabor: ${currentOrder.cake.flavor1}`;
                    if (currentOrder.cake.flavor1 === "2 Amores" && currentOrder.cake.flavor2) {
                        cakeSummary += ` e ${currentOrder.cake.flavor2}`;
                    }
                }
                cakeSummary += ` (R$ ${currentOrder.cake.price.toFixed(2).replace('.', ',')})`;
            }

            // Resumo dos Docinhos
            if (currentOrder.docinhos.quantity && currentOrder.docinhos.type) {
                const quantityLabel = docinhoOptions[currentOrder.docinhos.quantity].label;
                const typeLabel = currentOrder.docinhos.type === 'comuns' ? 'Comuns' : 'Especiais';
                total += currentOrder.docinhos.price;
                docinhosSummary = `${quantityLabel}, Tipo: ${typeLabel}`;
                if (currentOrder.docinhos.flavors.length > 0) {
                    docinhosSummary += `, Sabores: ${currentOrder.docinhos.flavors.join(' e ')}`;
                }
                docinhosSummary += ` (R$ ${currentOrder.docinhos.price.toFixed(2).replace('.', ',')})`;
            }

            currentOrder.totalPrice = total;

            summaryCakeDetails.textContent = cakeSummary;
            summaryDocinhosDetails.textContent = docinhosSummary;
            summaryTotalPrice.textContent = `R$ ${currentOrder.totalPrice.toFixed(2).replace('.', ',')}`;
        }

        function sendOrderViaWhatsApp() {
            // Validação básica dos campos obrigatórios
            if (!currentOrder.cake.format || !currentOrder.cake.size || !currentOrder.cake.type) {
                alert("Por favor, selecione o formato, tamanho e tipo do bolo.");
                return;
            }
            if (!currentOrder.cake.flavor1 || (currentOrder.cake.flavor1 === "2 Amores" && !currentOrder.cake.flavor2)) {
                alert("Por favor, selecione o(s) sabor(es) do bolo.");
                return;
            }
            if (addDocinhosCheckbox.checked && (!currentOrder.docinhos.quantity || !currentOrder.docinhos.type || currentOrder.docinhos.flavors.length === 0)) {
                alert("Por favor, selecione a quantidade, tipo e sabor(es) dos docinhos.");
                return;
            }
            if (!customerNameInput.value || !customerPhoneInput.value || !deliveryDateInput.value || !deliveryTimeInput.value) {
                alert("Por favor, preencha todos os seus dados para finalizar o pedido.");
                return;
            }

            updateCustomerInfo(); // Garante que os dados do cliente estão atualizados

            let message = `Olá, Manna Cakes! Gostaria de fazer um pedido:\n\n`;
            message += `*Cliente:* ${currentOrder.customer.name}\n`;
            message += `*Telefone:* ${currentOrder.customer.phone}\n\n`;

            // Detalhes do Bolo
            if (currentOrder.cake.format && currentOrder.cake.size && currentOrder.cake.type) {
                const formatLabel = cakeFormats[currentOrder.cake.format].label;
                const sizeLabel = cakeFormats[currentOrder.cake.format].sizes[currentOrder.cake.size].label;
                const typeLabel = currentOrder.cake.type === 'comum' ? 'Comum' : 'Especial';
                message += `*Bolo:* ${formatLabel} - ${sizeLabel} (${typeLabel})\n`;
                if (currentOrder.cake.flavor1) {
                    message += `  Sabor: ${currentOrder.cake.flavor1}`;
                    if (currentOrder.cake.flavor1 === "2 Amores" && currentOrder.cake.flavor2) {
                        message += ` e ${currentOrder.cake.flavor2}`;
                    }
                    message += `\n`;
                }
                message += `  Preço do Bolo: R$ ${currentOrder.cake.price.toFixed(2).replace('.', ',')}\n\n`;
            }

            // Detalhes dos Docinhos
            if (currentOrder.docinhos.quantity && currentOrder.docinhos.type) {
                const quantityLabel = docinhoOptions[currentOrder.docinhos.quantity].label;
                const typeLabel = currentOrder.docinhos.type === 'comuns' ? 'Comuns' : 'Especiais';
                message += `*Docinhos:* ${quantityLabel} (${typeLabel})\n`;
                if (currentOrder.docinhos.flavors.length > 0) {
                    message += `  Sabores: ${currentOrder.docinhos.flavors.join(' e ')}\n`;
                }
                message += `  Preço dos Docinhos: R$ ${currentOrder.docinhos.price.toFixed(2).replace('.', ',')}\n\n`;
            }

            message += `*Valor Total:* R$ ${currentOrder.totalPrice.toFixed(2).replace('.', ',')}\n\n`;
            message += `*Data de Entrega/Retirada:* ${currentOrder.customer.deliveryDate.split('-').reverse().join('/')}\n`;
            message += `*Hora de Entrega/Retirada:* ${currentOrder.customer.deliveryTime}\n\n`;

            if (currentOrder.customer.observations) {
                message += `*Observações:* ${currentOrder.customer.observations}\n\n`;
            }

            message += `Aguardando a confirmação! 😊`;

            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            showPage('home-page'); // Inicia na página inicial
            populateCakeFlavors();
            populateDocinhoFlavors();
            updateCakeSizesOptions(); // Popula as opções iniciais de tamanho (redondo por padrão)
            updateOrderSummary(); // Inicializa o resumo
        });

        startOrderBtn.addEventListener('click', () => showPage('order-page'));

        cakeFormatRadios.forEach(radio => {
            radio.addEventListener('change', updateCakeSizesOptions);
        });

        cakeFlavor1Select.addEventListener('change', updateCakeFlavorSelection);
        cakeFlavor2Select.addEventListener('change', updateCakeFlavorSelection);

        addDocinhosCheckbox.addEventListener('change', toggleDocinhos);

        docinhoQuantityRadios.forEach(radio => {
            radio.addEventListener('change', updateDocinhoSelection);
        });
        docinhoTypeRadios.forEach(radio => {
            radio.addEventListener('change', updateDocinhoSelection);
        });
        docinhoFlavor1Select.addEventListener('change', updateDocinhoFlavorSelection);
        docinhoFlavor2Select.addEventListener('change', updateDocinhoFlavorSelection);

        // Atualiza o resumo ao digitar nos campos do cliente
        customerNameInput.addEventListener('input', updateCustomerInfo);
        customerPhoneInput.addEventListener('input', updateCustomerInfo);
        deliveryDateInput.addEventListener('input', updateCustomerInfo);
        deliveryTimeInput.addEventListener('input', updateCustomerInfo);
        observationsTextarea.addEventListener('input', updateCustomerInfo);

        finalizeOrderBtn.addEventListener('click', sendOrderViaWhatsApp);

        // Função para simular alert com modal (melhor para iframes)
        function alert(message) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg shadow-xl p-6 max-w-sm mx-auto text-center">
                    <p class="text-lg font-semibold text-gray-800 mb-4">${message}</p>
                    <button class="bg-pink-400 hover:bg-pink-500 text-white font-bold py-2 px-4 rounded-full" onclick="this.closest('.fixed').remove()">OK</button>
                </div>
            `;
            document.body.appendChild(modal);
        }
    </script>
</body>
</html>

